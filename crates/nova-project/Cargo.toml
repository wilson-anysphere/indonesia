[package]
name = "nova-project"
version.workspace = true
edition = "2021"

[features]
default = ["bazel"]
bazel = ["dep:nova-build-bazel"]
# Enable Bazel's Build Server Protocol (BSP) integration end-to-end.
#
# This keeps BSP optional (not on by default) while allowing downstream crates to enable it
# transitively without depending on `nova-build-bazel` directly.
bazel-bsp = ["bazel", "nova-build-bazel/bsp"]

[dependencies]
regex = "1.10.3"
roxmltree = "0.20.0"
thiserror = "1.0.56"
walkdir = "2.5.0"
serde = { version = "1", features = ["derive"] }
serde_json.workspace = true
toml = "0.8"
nova-archive = { path = "../nova-archive" }
nova-build-model = { path = "../nova-build-model" }
nova-core = { path = "../nova-core" }
nova-classfile = { path = "../nova-classfile" }
nova-config = { path = "../nova-config" }
nova-hir = { path = "../nova-hir" }
nova-modules = { path = "../nova-modules" }
nova-syntax = { path = "../nova-syntax" }
nova-build-bazel = { path = "../nova-build-bazel", optional = true }

[dev-dependencies]
anyhow = "1"
tempfile = "3.10.1"
zip = { version = "2.4.2", default-features = false, features = ["deflate"] }

[[test]]
# Backwards-compatible alias for older docs/automation that run
# `cargo test -p nova-project --test harness`.
name = "harness"
path = "tests/real_projects.rs"
