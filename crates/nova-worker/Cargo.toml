[package]
name = "nova-worker"
version.workspace = true
edition.workspace = true

[features]
tls = [
    "dep:tokio-rustls",
    "dep:rustls",
    "dep:rustls-pemfile",
    # Keep nova-worker and nova-router TLS feature sets aligned for tests/benchmarks that construct
    # `nova_router::DistributedRouterConfig` while building the workspace with `--all-features`.
    "nova-router/tls",
]

[dependencies]
anyhow.workspace = true
tokio.workspace = true
tracing.workspace = true

nova-cache = { path = "../nova-cache" }
nova-bugreport = { path = "../nova-bugreport" }
nova-config = { path = "../nova-config" }
nova-fuzzy = { path = "../nova-fuzzy" }
nova-index = { path = "../nova-index" }
nova-remote-proto = { path = "../nova-remote-proto" }

tokio-rustls = { version = "0.26.0", optional = true }
rustls = { version = "0.23.18", default-features = false, features = ["std"], optional = true }
rustls-pemfile = { version = "2.2.0", optional = true }

[dev-dependencies]
tempfile.workspace = true
tokio.workspace = true
rcgen = "0.13.2"

nova-lsp = { path = "../nova-lsp" }
nova-router = { path = "../nova-router" }
